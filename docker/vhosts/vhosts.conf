<VirtualHost *:80>
    ServerName localhost
    DocumentRoot /var/www/web

    <Directory /var/www/web>
        AllowOverride None
        Require all granted

        # Gestion des fichiers statiques en premier
        <FilesMatch "\.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$">
            RewriteEngine Off
        </FilesMatch>

        # Réécriture pour Symfony
        <IfModule mod_rewrite.c>
            RewriteEngine On
            RewriteCond %{REQUEST_URI}::$0 ^(/.+)/(.*)::\2$
            RewriteRule .* - [E=BASE:%1]
            RewriteCond %{HTTP:Authorization} .+
            RewriteRule ^ - [E=HTTP_AUTHORIZATION:%0]
            RewriteCond %{REQUEST_FILENAME} !-f
            RewriteRule ^ %{ENV:BASE}/index.php [QSA,L]
        </IfModule>
    </Directory>

    # Configuration des types MIME spécifiques
    AddType text/css .css
    AddType application/javascript .js
    AddType image/svg+xml .svg
    AddType application/x-font-woff .woff
    AddType application/x-font-woff2 .woff2

    ErrorLog /var/log/apache2/project_error.log
    CustomLog /var/log/apache2/project_access.log combined
</VirtualHost> 